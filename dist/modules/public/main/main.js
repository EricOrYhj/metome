define(function(a,o,i){a("../live/live"),a("../common/config"),a("../common/constant");var n={};n.init=function(){$(".msgWrapper").on("click",n.playAudio)},n.playAudio=function(){var o=$(this);a.async("modules/uicontrol/mp3player/mp3player",function(a){var i=o.closest(".msgItem"),n=i.find(".audioInfo").data("audio"),d=i.data("audio");window.chatAudioPlayer&&window.chatAudioPlayer.stop(),d?i.hasClass("audioPlaying")?(d.stop(),window.chatAudioPlayer.stop()):(window.chatAudioPlayer=d,window.chatAudioPlayer.play(),i.addClass("audioPlaying")):(d=new a({mp3_url:n+"?avthumb/mp3",wav_url:n+"?avthumb/wav",onStop:function(){i.removeClass("audioPlaying")}}),window.chatAudioPlayer=d,window.chatAudioPlayer.play(),i.addClass("audioPlaying").data("audio",d))})},i.exports=n});