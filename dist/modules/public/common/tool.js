define(function(require){var e={};return e.getFileExtends=function(e){return e.substring(e.lastIndexOf(".")+1)},e.isPicture=function(e){if(!e)return!1;var t=["jpg","gif","png","jpeg","bmp"];for(var n in t)if(t[n]===e.toLowerCase())return!0;return!1},e.tagConvert=function(e){return e.replace(/</g,"&lt").replace(/>/g,"&gt;")},e.removeHTMLTag=function(e){return e.replace(/<[^>]*>/gi,"")},e.getJSONLength=function(e){var t=0;for(var n in e)t++;return t},e.lazyload=function(e,t){var n=e.find("[data-src]");n.length||"undefined"==typeof e.attr("data-src")||(n=e),n.each(function(e,n){var a=new Image,r=$(n);r.data("loaded")||(a.onerror=function(){n.src=Config.errorImgPath,r.data("loaded",!0).closest(".imgPreview").removeClass("loading")},a.onload=function(){n.src=r.attr("data-src"),r.data("loaded",!0).closest(".imgPreview").removeClass("loading").fadeIn(),t&&t()},a.src=r.attr("data-src"))})},e.onBatchImageLoad=function(e,t){var n=2*e.length,a=0;console.log("total:",n),$.each(e,function(e,r){r.onload=function(){a++,n===n&&t()}})},e.getUUID=function(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return function(){return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()}}(),e.getURLQuery=function(e){var t=new RegExp("(^|&)"+e+"=([^&]*)(&|$)","i"),n=window.location.search.substr(1).match(t);return null!=n?unescape(n[2]):null},e.createTimeSpan=function(e){var t=new Date,n=e.split(" ")[0],a=n.split("-")[0],r=n.split("-")[1]-1,o=n.split("-")[2],i=e.split(" ")[1],s=i.split(":")[0],l=i.split(":")[1],u=i.split(":")[2];t.setFullYear(a),t.setMonth(r),t.setDate(o),t.setHours(s),t.setMinutes(l),t.setSeconds(u);var c=new Date,g=new Date;g.setFullYear(c.getFullYear()),g.setMonth(c.getMonth()),g.setDate(c.getDate()),g.setHours(0),g.setMinutes(0),g.setSeconds(0);var f,d=0;return t-g>=0?(d=c-t,f=d<1e3&&d<6e4?"刚刚":d>1e3&&d<6e4?Math.floor(d/1e3)+"秒前":d>6e4&&d<36e5?Math.floor(d/6e4)+"分钟前":"今天 "+s+":"+l):(d=g-t,f=d<864e5?"昨天 "+s+":"+l:d>864e5&&a==g.getFullYear()?r+1+"月"+o+"日 "+s+":"+l:a+"年"+(r+1)+"月"+o+"日 "+s+":"+l),f},e.formatMsgDate=function(e){e=e||(new Date).format("yyyy-MM-dd hh:mm:ss.S");var t=new Date,n=e.split(" ")[0],a=n.split("-")[0],r=n.split("-")[1]-1,o=n.split("-")[2],i=e.split(" ")[1],s=i.split(":")[0],l=i.split(":")[1],u=i.split(":")[2];t.setFullYear(a),t.setMonth(r),t.setDate(o),t.setHours(s),t.setMinutes(l),t.setSeconds(u);var c=new Date,g=new Date;g.setFullYear(c.getFullYear()),g.setMonth(c.getMonth()),g.setDate(c.getDate()),g.setHours(0),g.setMinutes(0),g.setSeconds(0);var f,d=0;return t-g>=0?f=s+":"+l:(d=g-t,f=d<864e5?"昨天 "+s+":"+l:d>864e5&&a==g.getFullYear()?r+1+"月"+o+"日":a+"年"+(r+1)+"月"+o+"日"),f},e.formatMsgTime=function(e){var t,n=new Date(e),a=n.getFullYear(),r=n.getMonth()+1,o=n.getDate(),i=n.getHours(),s=n.getMinutes(),l=(n.getSeconds(),new Date),u=0;return u=l-n,t=u<=6e4?"刚刚":6e4<u&&u<=36e5?parseInt(u/6e4)+"分钟前":36e5<u&&u<=864e5?parseInt(u/36e5)+"小时前":864e5<u&&u<=1296e6?parseInt(u/864e5)+"天前":u>1296e6&&a==l.getFullYear()?r+"-"+o+" "+i+":"+s:a+"-"+r+"-"+o+" "+i+":"+s},e.getImageThumbnail=function(e,t,n){var a="?imageView2/1";return t?a=a+"/w/"+t:null,n?a=a+"/h/"+n:null,a+="/q/100",e+a},e.EventWorker=function(){var e=$({}),t={};return t.receive=function(){e.on.apply(e,arguments)},t.cancel=function(){e.off.apply(e,arguments)},t.dispatch=function(){e.trigger.apply(e,arguments)},t},window.setCookie=function(e,t,n){var a;if(n)a=n.toGMTString();else{var r=new Date;r.setFullYear(r.getFullYear()+10),a=r.toGMTString()}document.domain.indexOf(".mingdao.com")==-1?document.cookie=e+"="+escape(t)+";expires="+a+";path=/":document.cookie=e+"="+escape(t)+";expires="+a+";path=/;domain=.mingdao.com"},window.getCookie=function(e){var t=document.cookie.match(new RegExp("(^| )"+e+"=([^;]*)(;|$)"));return null!==t?unescape(t[2]):null},$.fn.preventPageScroll=function(){$(this).on("mousewheel DOMMouseScroll",function(e){var t=e.originalEvent,n=t.wheelDelta||-t.detail;this.scrollTop+=30*(n<0?1:-1),e.preventDefault()})},window.Tool=e,e});